<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>처방내역 조회</title>
    <link rel="stylesheet" th:href="@{/css/authStyles.css}">
    <link rel="stylesheet" th:href="@{/css/navStyles.css}">
    <script type="text/javascript" th:src="@{/js/jquery-3.6.0.min.js}"></script>
    <script src="/js/setReferrer.js" defer></script>
    <script th:inline="javascript">
        const prescriptionList = /*[[${session.prescriptionList}]]*/ null;
        const SS_USER = /*[[${session.SS_USER}]]*/ null;

        $(document).ready(function (){
            if (SS_USER == null) {
                alert("로그인 후 이용 가능합니다.");
                setReferrer();
                return;
            }

            // prescriptionList가 비어있는지 확인
            if (!prescriptionList || prescriptionList.length === 0) {
                alert("처방내역DB에 데이터가 없습니다. 동기화를 진행해주세요.");
                location.href="/health/auth";
            }

        });
    </script>
</head>
<body>
<nav>
    <div class="nav-content">
        <div class="nav-group same_width justify-left">
            <a href="/user/index">하루약속</a>
        </div>
        <div class="nav-group" id="serviceNav">
            <a href="/health/prescriptionList">처방 내역 조회</a>
            <a href="/health/auth">처방 내역 동기화</a>
            <a href="#">AI 챗봇 상담</a>
            <a href="#">주변 약국 찾기</a>
        </div>
        <div class="nav-group same_width justify-right" id="beforeLoginNav" th:if="${session.SS_USER == null}">
            <a href="/user/signin" class="login" onclick="setReferrer()">로그인</a>
        </div>
        <div class="nav-group after_login same_width justify-right" id="afterLoginNav" th:if="${session.SS_USER != null}">
            <a href="/user/pwd_verification" class="nav-icon" title="마이페이지">👤</a>
            <a href="/user/logout" class="login">로그아웃</a>
        </div>
    </div>
</nav>
</body>
</html>