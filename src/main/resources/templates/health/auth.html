

<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°„í¸ì¸ì¦ í˜ì´ì§€</title>
    <link rel="stylesheet" href="/css/authStyles.css">
    <link rel="stylesheet" href="/css/navStyles.css">
    <script type="text/javascript" src="/js/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="/js/nav.js" defer></script>
    <script src="/js/setReferrer.js" defer></script>
    <script th:inline="javascript">
        let userId = /*[[${userId}]]*/ null;
        let error = /*[[${msg}]]*/ null;
        let SS_USER_ID = /*[[${session.SS_USER_ID}]]*/ null;
        let ref = /*[[${ref}]]*/ null;

        function showModal(modalId, checkboxId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('show');
            }

            // ì²´í¬ë°•ìŠ¤ ì²´í¬ ì²˜ë¦¬
            const checkbox = document.getElementById(checkboxId);
            if (checkbox) {
                checkbox.checked = true;
            }
        }

        // ëª¨ë‹¬ ë‹«ê¸° í•¨ìˆ˜
        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('show');
            }
        }

        $(document).ready(function () {

            if (SS_USER_ID==null){
                alert("ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í™ë‹ˆë‹¤.");
                setReferrer();
            }

            // ì „ì²´ë™ì˜ ì²´í¬ë°•ìŠ¤
            const checkAll = document.getElementById("checkAll");
            // ê°œë³„ë™ì˜ ì²´í¬ë°•ìŠ¤ë“¤
            const checkboxes = document.querySelectorAll(".agree");

            // ì „ì²´ë™ì˜ í´ë¦­ ì‹œ
            checkAll.addEventListener("change", function() {
                checkboxes.forEach((checkbox) => {
                    checkbox.checked = this.checked;
                });
            });

            // ê°œë³„ ì²´í¬ë°•ìŠ¤ í´ë¦­ ì‹œ ì „ì²´ë™ì˜ ìƒíƒœ ì—…ë°ì´íŠ¸
            checkboxes.forEach((checkbox) => {
                checkbox.addEventListener("change", function() {
                    checkAll.checked = Array.from(checkboxes).every((cb) => cb.checked);
                });
            });

            // ëª¨ë‹¬ ê´€ë ¨ ì´ë²¤íŠ¸ ì„¤ì •
            document.querySelectorAll('.modal button').forEach((button) => {
                button.addEventListener('click', function() {
                    const modalId = this.getAttribute('data-modal-id');
                    closeModal(modalId);
                });
            });

            // ë ˆì´ë¸” í´ë¦­ ì´ë²¤íŠ¸ ì„¤ì •
            document.querySelectorAll('.label-button').forEach((labelButton) => {
                labelButton.addEventListener("click", function(event) {
                    // ì²´í¬ë°•ìŠ¤ë¥¼ ì§ì ‘ í´ë¦­í•œ ê²½ìš° ëª¨ë‹¬ì„ ë„ìš°ì§€ ì•ŠìŒ
                    if (event.target.tagName === 'INPUT') {
                        return;
                    }

                    // ì²´í¬ë°•ìŠ¤ì™€ ëª¨ë‹¬ ID ë§¤í•‘
                    const checkbox = labelButton.querySelector('input[type="checkbox"]');
                    const checkboxId = checkbox.id;
                    let modalId = "";
                    if (checkboxId === "checkbox1") modalId = "modal1";
                    if (checkboxId === "checkbox2") modalId = "modal2";
                    if (checkboxId === "checkbox3") modalId = "modal3";

                    // í´ë¦­ í›„ ëª¨ë‹¬ ë„ìš°ê¸° (ìˆœì„œ ë³´ì¥)
                    setTimeout(() => {
                        // if (checkbox.checked) {
                        //     showModal(modalId);
                        // }
                        showModal(modalId);
                    }, 50);
                });
            });

            // ì…ë ¥ í•„ë“œ ìœ íš¨ì„± ê²€ì‚¬ í•¨ìˆ˜
            function validateInputFields() {
                const inputFields = document.querySelectorAll(".input-box input, .input-box select");

                for (const field of inputFields) {
                    if (!field.value.trim()) {
                        const label = field.closest(".input-box").querySelector("label").innerText;
                        alert(label + 'ì„(ë¥¼) ì…ë ¥í•´ì£¼ì„¸ìš”.');
                        field.focus(); // í•´ë‹¹ í•„ë“œë¡œ í¬ì»¤ìŠ¤ ì´ë™
                        return false;
                    }
                }
                return true;
            }

            // ë¯¼ê°„ ì¸ì¦ì„œ ìœ íš¨ì„± ê²€ì‚¬ í•¨ìˆ˜
            function validateForm() {
                const radios = document.getElementsByName('PrivateAuthType');
                let isChecked = false;
                let selectedImageSrc = "";
                let selectedImageAlt = "";

                for (const radio of radios) {
                    if (radio.checked) {
                        isChecked = true;
                        // ì„ íƒëœ ì´ë¯¸ì§€ì˜ src ê°€ì ¸ì˜¤ê¸°
                        const selectedImage = radio.parentElement.querySelector("img");
                        if (selectedImage) {
                            selectedImageSrc = selectedImage.src;
                            selectedImageAlt = selectedImage.alt;
                        }
                        break;
                    }
                }

                if (!isChecked) {
                    alert('ë¯¼ê°„ ì¸ì¦ì„œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    return false;
                }

                // ì…ë ¥ í•„ë“œ ìœ íš¨ì„± ê²€ì‚¬ í˜¸ì¶œ
                if (!validateInputFields()) {
                    return false;
                }

                // hidden inputì— ì´ë¯¸ì§€ ê²½ë¡œ ë„£ê¸°
                let hiddenImageInput = document.getElementById("selectedImageSrc");
                if (!hiddenImageInput) {
                    hiddenImageInput = document.createElement("input");
                    hiddenImageInput.type = "hidden";
                    hiddenImageInput.name = "selectedImageSrc";
                    hiddenImageInput.id = "selectedImageSrc";
                    document.getElementById("health").appendChild(hiddenImageInput);
                }
                hiddenImageInput.value = selectedImageSrc;

                let hiddenAltInput = document.getElementById("selectedImageAlt");
                if (!hiddenAltInput) {
                    hiddenAltInput = document.createElement("input");
                    hiddenAltInput.type = "hidden";
                    hiddenAltInput.name = "selectedImageAlt";
                    hiddenAltInput.id = "selectedImageAlt";
                    document.getElementById("health").appendChild(hiddenAltInput);
                }
                hiddenAltInput.value = selectedImageAlt;

                return true;
            }

            // í¼ ì œì¶œ ì´ë²¤íŠ¸
            document.getElementById("health").addEventListener("submit", function (event) {
                event.preventDefault(); // ê¸°ë³¸ ì „ì†¡ ë§‰ê¸°

                // ìœ íš¨ì„± ê²€ì‚¬ ìˆ˜í–‰
                if (!validateForm()) {
                    return;
                }

                // ë²ˆí˜¸ í•©ì¹˜ê¸°
                const prefix = document.querySelector("select[name='phonePrefix']").value.trim();
                const number = document.querySelector("input[name='number']").value.trim();
                const fullNumber = prefix + number;

                console.log("Full number:", fullNumber);

                // hidden inputì— í•©ì¹œ ë²ˆí˜¸ ë„£ê¸°
                let hiddenInput = document.getElementById("fullPhoneNumber");
                if (!hiddenInput) {
                    hiddenInput = document.createElement("input");
                    hiddenInput.type = "hidden";
                    hiddenInput.name = "UserCellphoneNumber";
                    hiddenInput.id = "fullPhoneNumber";
                    this.appendChild(hiddenInput);
                }
                hiddenInput.value = fullNumber;

                // í¼ ì „ì†¡
                this.submit();
            });
        });

    </script>
</head>
<body>
<!-- ëª¨ë‹¬ ì°½ -->
<div id="modal1" class="modal">
    <div class="modal-content">
        <h3>ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš© ë™ì˜</h3>
        <p>êµ­ë¯¼ê±´ê°•ë³´í—˜ê³µë‹¨(ì´í•˜ â€œê¸°ê´€â€ì´ë¼ í•œë‹¤) ëŒ€í‘œ í™ˆí˜ì´ì§€ ì´ìš©ê³¼ ê´€ë ¨í•˜ì—¬, ê·€í•˜ì˜ ê°œì¸ì •ë³´ë¥¼ ìˆ˜ì§‘Â·ì´ìš© í•˜ì˜¤ë‹ˆ, ë™ì˜ì—¬ë¶€ë¥¼ ê²°ì •í•˜ì—¬ ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.<br><br>
            1.ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš© ëª©ì <br>
            êµ­ë¯¼ê±´ê°•ë³´í—˜ê³µë‹¨ ëŒ€í‘œí™ˆí˜ì´ì§€ ì„œë¹„ìŠ¤ ì´ìš©<br><br>
            2.ìˆ˜ì§‘í•˜ë ¤ëŠ” ê°œì¸ì •ë³´ì˜ í•­ëª©<br>
            - ê°„í¸ì¸ì¦: ì„±ëª…, ìƒë…„ì›”ì¼, íœ´ëŒ€ì „í™”ë²ˆí˜¸, ì´ìš©ìê°€ ì„ íƒí•œ ì¸ì¦ì‚¬ì—…ì, CI(ì—°ê³„ì •ë³´)<br>
            - ì´ë ¥ê´€ë¦¬: DI(ì¤‘ë³µê°€ì…í™•ì¸ì •ë³´), IPì£¼ì†Œ, ë¸Œë¼ìš°ì € ì •ë³´, ì¿ í‚¤<br><br>
            3.ê°œì¸ì •ë³´ì˜ ë³´ìœ  ë° ì´ìš© ê¸°ê°„<br>
            - ê°„í¸ì¸ì¦: ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš© ëª©ì ì´ ì†Œë©¸ë˜ë©´ ì¦‰ì‹œ íŒŒê¸°<br>
            - ì´ë ¥ê´€ë¦¬: ì ‘ì†ì¼ë¡œë¶€í„° 10ë…„ ë³´ìœ  í›„ ì‚­ì œ<br><br>
            4.ë™ì˜ ê±°ë¶€ ê¶Œë¦¬<br>
            ì‹ ì²­ì¸ì€ ìœ„ì˜ ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš©ì— ëŒ€í•œ ë™ì˜ë¥¼ ê±°ë¶€í•  ê¶Œë¦¬ê°€ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë™ì˜ë¥¼ ê±°ë¶€í•  ê²½ìš° ëŒ€í‘œí™ˆí˜ì´ì§€ ì„œë¹„ìŠ¤ ì´ìš©ì´ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </p>
        <button onclick="closeModal('modal1')">í™•ì¸</button>
    </div>
</div>

<div id="modal2" class="modal">
    <div class="modal-content">
        <h3>ì œ3ì ì •ë³´ì œê³µ ë™ì˜</h3>
        <p>êµ­ë¯¼ê±´ê°•ë³´í—˜ê³µë‹¨(ì´í•˜ â€œê¸°ê´€â€ì´ë¼ í•œë‹¤) ëŒ€í‘œ í™ˆí˜ì´ì§€ ì´ìš©ê³¼ ê´€ë ¨í•˜ì—¬, ê·€í•˜ì˜ ê°œì¸ì •ë³´ë¥¼ ì œê³µí•˜ì˜¤ë‹ˆ, ë™ì˜ì—¬ë¶€ë¥¼ ê²°ì •í•˜ì—¬ ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.<br><br>
            1.ê°œì¸ì •ë³´ë¥¼ ì œê³µë°›ëŠ” ì<br>
            ì´ìš©ìê°€ ì„ íƒí•œ ì¸ì¦ì‚¬ì—…ì<br><br>
            2.ê°œì¸ì •ë³´ë¥¼ ì œê³µë°›ëŠ” ìì˜ ê°œì¸ì •ë³´ ì´ìš© ëª©ì <br>
            ê°„í¸ì¸ì¦ ì‹œ ë³¸ì¸ì¸ì¦ ë˜ëŠ” ì „ìì„œëª…<br><br>
            3.ì œê³µí•˜ëŠ” ê°œì¸ì •ë³´ì˜ í•­ëª©<br>
            ìƒë…„ì›”ì¼, ì„±ëª…, íœ´ëŒ€í°ë²ˆí˜¸<br><br>
            4.ê°œì¸ì •ë³´ë¥¼ ì œê³µë°›ëŠ” ìì˜ ê°œì¸ì •ë³´ ë³´ìœ  ë° ì´ìš© ê¸°ê°„<br>
            ë³¸ì¸ì¸ì¦ ë˜ëŠ” ì „ìì„œëª… í›„ ì¦‰ì‹œ íŒŒê¸°<br><br>
            5.ë™ì˜ ê±°ë¶€ ê¶Œë¦¬<br>
            ì‹ ì²­ì¸ì€ ìœ„ì˜ ê°œì¸ì •ë³´ ì œ3ì ì œê³µì— ëŒ€í•œ ë™ì˜ë¥¼ ê±°ë¶€í•  ê¶Œë¦¬ê°€ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë™ì˜ë¥¼ ê±°ë¶€í•  ê²½ìš° ëŒ€í‘œí™ˆí˜ì´ì§€ ì„œë¹„ìŠ¤ ì´ìš©ì´ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </p>
        <button onclick="closeModal('modal2')">í™•ì¸</button>
    </div>
</div>

<div id="modal3" class="modal">
    <div class="modal-content">
        <h3>ê¸°íƒ€ ê³ ì§€ì‚¬í•­</h3>
        <p>êµ­ë¯¼ê±´ê°•ë³´í—˜ê³µë‹¨ì€ ì•„ë˜ì™€ ê°™ì´ ë²•ë¥ ì— ê·¼ê±°í•˜ì—¬ ê°œì¸ì •ë³´ë¥¼ ìˆ˜ì§‘Â·ì´ìš©í•©ë‹ˆë‹¤.<br><br>
            1.ëª©ì <br>
            êµ­ë¯¼ê±´ê°•ë³´í—˜ê³µë‹¨ ëŒ€í‘œí™ˆí˜ì´ì§€ ì„œë¹„ìŠ¤ ì´ìš©ì„ ìœ„í•¨<br><br>
            2.í•­ëª©<br>
            ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸, ì™¸êµ­ì¸ë“±ë¡ë²ˆí˜¸<br><br>
            3.ìˆ˜ì§‘Â·ì´ìš© ê·¼ê±°<br>
            ã€Œêµ­ë¯¼ê±´ê°•ë³´í—˜ë²•ã€ ì œ14ì¡°(ì—…ë¬´ ë“±) ê°™ì€ ë²• ì‹œí–‰ë ¹ ì œ9ì¡°ì˜2(ê³µë‹¨ì˜ ì—…ë¬´) ë° ê°™ì€ ë²• ì‹œí–‰ë ¹ ì œ81ì¡° ì œ1í•­ ì œ2í˜¸(ë¯¼ê°ì •ë³´ ë° ê³ ìœ ì‹ë³„ ì •ë³´ì˜ ì²˜ë¦¬)</p>
        <button onclick="closeModal('modal3')">í™•ì¸</button>
    </div>
</div>

<nav>
    <div class="nav-content">
        <div class="nav-group same_width justify-left">
            <a href="/user/index">í•˜ë£¨ì•½ì†</a>
        </div>
        <div class="nav-group" id="serviceNav">
            <a href="#">ì²˜ë°© ë‚´ì—­ ì¡°íšŒ</a>
            <a href="#">ì²˜ë°© ë‚´ì—­ ë™ê¸°í™”</a>
            <a href="#">AI ì±—ë´‡ ìƒë‹´</a>
            <a href="#">ì£¼ë³€ ì•½êµ­ ì°¾ê¸°</a>
        </div>
        <div class="nav-group same_width justify-right" id="beforeLoginNav">
            <a href="#" class="login" onclick="setReferrer()">ë¡œê·¸ì¸</a>
        </div>
        <div class="nav-group after_login same_width justify-right" id="afterLoginNav">
            <a href="/user/delOrUpdate" style="font-size: x-large" title="ë§ˆì´í˜ì´ì§€">ğŸ‘¤</a>
            <a href="/user/logout" class="login">ë¡œê·¸ì•„ì›ƒ</a>
        </div>
    </div>
</nav>

<div class="auth-container">
    <form id="health" action="/health/certificate" method="post" class="auth-box">
        <!-- ë¯¼ê°„ ì¸ì¦ì„œ ë¶€ë¶„ -->
        <div class="image-wrap">
            <h3 class="h4">ë¯¼ê°„ ì¸ì¦ì„œ</h3>
            <div class="image-container">
                <label class="image-label">
                    <input type="radio" name="PrivateAuthType" value="0" style="display:none;">
                    <img src="/authImgs/kakaotalk.png" alt="ì¹´ì¹´ì˜¤í†¡">
                    <p>ì¹´ì¹´ì˜¤í†¡</p>
                </label>
                <label class="image-label">
                    <input type="radio" name="PrivateAuthType" value="1" style="display:none;">
                    <img src="/authImgs/payco.png" alt="í˜ì´ì½”">
                    <p>í˜ì´ì½”</p>
                </label>
                <label class="image-label">
                    <input type="radio" name="PrivateAuthType" value="2" style="display:none;">
                    <img src="/authImgs/kb.png" alt="êµ­ë¯¼ì€í–‰">
                    <p>êµ­ë¯¼ì€í–‰</p>
                </label>
                <label class="image-label">
                    <input type="radio" name="PrivateAuthType" value="3" style="display:none;">
                    <img src="/authImgs/samsung.png" alt="ì‚¼ì„± íŒ¨ìŠ¤">
                    <p>ì‚¼ì„± íŒ¨ìŠ¤</p>
                </label>
                <label class="image-label">
                    <input type="radio" name="PrivateAuthType" value="4" style="display:none;">
                    <img src="/authImgs/pass.png" alt="í†µì‹ ì‚¬ íŒ¨ìŠ¤">
                    <p>í†µì‹ ì‚¬ íŒ¨ìŠ¤</p>
                </label>
                <label class="image-label">
                    <input type="radio" name="PrivateAuthType" value="5" style="display:none;">
                    <img src="/authImgs/shinhan.png" alt="ì‹ í•œì€í–‰">
                    <p>ì‹ í•œì€í–‰</p>
                </label>
                <label class="image-label">
                    <input type="radio" name="PrivateAuthType" value="6" style="display:none;">
                    <img src="/authImgs/naver.png" alt="ë„¤ì´ë²„">
                    <p>ë„¤ì´ë²„</p>
                </label>
            </div>
        </div>
        <div class="divider"></div>
        <div class="info-wrap">
            <div class="info-container">
                <h3 class="h4 margin_lef_zero">ë³¸ì¸ì¸ì¦ ì •ë³´ ì…ë ¥</h3>
                <div class="input-wrap">
                    <div class="input-box">
                        <label class="info-label" for="UserName">ì´ë¦„</label>
                        <input type="text" name="UserName" id="UserName" placeholder="í™ê¸¸ë™">
                    </div>
                    <div class="input-box">
                        <label class="info-label" for="BirthDate">ìƒë…„ì›”ì¼</label>
                        <input type="text" name="BirthDate" id="BirthDate" placeholder="19900101">
                    </div>
                    <div class="input-box">
                        <label class="info-label" for="phonePrefix">íœ´ëŒ€í° ë²ˆí˜¸</label>
                        <select name="phonePrefix" id="phonePrefix">
                            <option value="010">010</option>
                            <option value="011">011</option>
                            <option value="016">016</option>
                            <option value="017">017</option>
                            <option value="018">018</option>
                            <option value="019">019</option>
                        </select>
                        <input type="text" name="number" placeholder="12341234">
                    </div>
                </div>
            </div>
            <div class="agree-wrap">
                <h3 class="h4 margin_lef_zero">ì„œë¹„ìŠ¤ ì´ìš©ì— ëŒ€í•œ ë™ì˜</h3>
                <div class="agree-container">
                    <div>
                        <label class="agree-label"><input type="checkbox" id="checkAll"> ì „ì²´ë™ì˜</label>
                    </div>
                    <div class="label-button" id="agree1">
                        <label class="agree-label" for="checkbox1">
                            <input type="checkbox" id="checkbox1" class="agree" required>[í•„ìˆ˜] ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš© ë™ì˜
                        </label>
                    </div>
                    <div class="label-button" id="agree2">
                        <label class="agree-label" for="checkbox2">
                            <input type="checkbox" id="checkbox2" class="agree" required>[í•„ìˆ˜] ì œ3ì ì •ë³´ì œê³µ ë™ì˜
                        </label>
                    </div>
                    <div class="label-button" id="other-agree">
                        <label class="agree-label" for="checkbox3">
                            <input type="checkbox" id="checkbox3" class="agree" required>[í•„ìˆ˜] ê¸°íƒ€ ê³ ì§€ì‚¬í•­
                        </label>
                    </div>
                </div>
            </div>
            <div class="button-wrap">
                <div class="cancel-button">
                    <button type="button" class="cancel" onclick="location.href='/user/index'">ì·¨ì†Œ</button>
                </div>
                <div class="submit-button">
                    <button type="submit" class="submit">ë°ì´í„° ì „ì†¡</button>
                </div>
            </div>
        </div>
    </form>
</div>
</body>
</html>
