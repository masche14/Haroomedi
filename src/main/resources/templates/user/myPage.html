



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ë§ˆì´í˜ì´ì§€</title>
  <link href='//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css' rel='stylesheet' type='text/css'>
  <link href='//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-jp.css' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/userStyles.css">
  <link rel="stylesheet" href="/css/navStyles.css">
  <script type="text/javascript" src="/js/jquery-3.6.0.min.js"></script> <!-- JS ê²½ë¡œ ìˆ˜ì • -->
  <script src="/js/getExists.js" defer></script>
  <script src="/js/setReferrer.js" defer></script>
  <script src="/js/checkDuplicate.js" defer></script>
  <script src="/js/nav.js" defer></script>
  <script th:inline="javascript">
    let userId = /*[[${userId}]]*/ null;
    let existYN = /*[[${existYN}]]*/ null;
    let SS_USER_ID = /*[[${session.SS_USER_ID}]]*/ null;

    $(document).ready(function () {


      if (errorMsg && errorMsg.trim() !== "null"){
        alert(errorMsg)
      }

      const referrer = document.referrer;
      const referrer_page = referrer.split('/').pop();

      console.log("referrer : "+referrer_page)

      if ((referrer_page!=="myPage")&&(referrer_page!=="pwd_verification")){
        alert("ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì ‘ê·¼ì…ë‹ˆë‹¤.")
        window.location.href="/user/index";
      }

      document.getElementById("nameDisplay").textContent = SS_USER_NAME;
      document.getElementById("nicknameDisplay").textContent = SS_USER_NICKNAME;
      document.getElementById("emailDisplay").textContent = SS_USER_EMAIL;

      // í¼ ì œì¶œ ì „ í™•ì¸í•˜ëŠ” í•¨ìˆ˜
      function validateForm(event) {
        if (document.getElementById("input_nickname").value){
          if (!nicknameChecked) {
            event.preventDefault();  // í¼ ì œì¶œì„ ë§‰ìŒ
            alert("ë‹‰ë„¤ì„ ì¤‘ë³µ ì—¬ë¶€ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.");
            return false;
          }
        }

        console.log(check_nick);

        console.log(document.getElementById("input_nickname").value);

        if (document.getElementById("input_nickname").value !== ""){
          if (document.getElementById("input_nickname").value !== check_nick.trim()){
            event.preventDefault();
            alert("ë‹‰ë„¤ì„ ì¤‘ë³µí™•ì¸ì„ ë‹¤ì‹œ ì§„í–‰í•´ì£¼ì„¸ìš”.")
            return false;
          }
        }
        // ì¤‘ë³µ í™•ì¸ì´ ì™„ë£Œë˜ì—ˆìœ¼ë©´ í¼ì„ ì œì¶œ
        const pwd = document.getElementById("input_pwd").value;
        const pwd2 = document.getElementById("chk_pwd").value;

        if (pwd !== pwd2){
          event.preventDefault();
          alert("ë¹„ë°€ë²ˆí˜¸ì™€ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì— ì…ë ¥ëœ ê°’ì´\nì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
          return false;
        }

        const emailInput = document.getElementById("input_email").value.trim();

        // ì´ë©”ì¼ì´ ì¡´ì¬í•˜ê³ , approveResultê°€ 'y'ê°€ ì•„ë‹ ê²½ìš° ê²½ê³ ì°½ í‘œì‹œ
        if (emailInput && approveResult !== 'y') {
          event.preventDefault();
          alert("ì´ë©”ì¼ ì¸ì¦ì„ ì™„ë£Œí•´ì•¼ í•©ë‹ˆë‹¤.");
          return false; // ì´ë©”ì¼ ì¸ì¦ì´ ì™„ë£Œë˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ í¼ ì œì¶œì„ ë§‰ìŒ
        }

        // ëª¨ë“  ì¡°ê±´ì´ ë§Œì¡±ë˜ì—ˆì„ ê²½ìš° í¼ ì œì¶œ í—ˆìš©
        return true;
      }

      // íšŒì›ê°€ì… ë²„íŠ¼ í´ë¦­ ì‹œ validateForm ì‹¤í–‰
      document.getElementById('goToMain').addEventListener('click', validateForm);
    });
  </script>

</head>
<body>
<header></header>

<!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
<nav>
  <div class="nav-content">
    <div class="nav-group same_width justify-left">
      <a href="/user/index">í•˜ë£¨ì•½ì†</a>
    </div>
    <div class="nav-group" id="serviceNav">
      <a href="#">ì²˜ë°© ë‚´ì—­ ì¡°íšŒ</a>
      <a href="#">ì²˜ë°© ë‚´ì—­ ë™ê¸°í™”</a>
      <a href="#">AI ì±—ë´‡ ìƒë‹´</a>
      <a href="#">ì£¼ë³€ ì•½êµ­ ì°¾ê¸°</a>
    </div>
    <div class="nav-group same_width justify-right" id="beforeLoginNav">
      <a href="/user/signin" class="login" onclick="setReferrer()">ë¡œê·¸ì¸</a>
    </div>
    <div class="nav-group after_login same_width justify-right" id="afterLoginNav">
      <a href="/user/delOrUpdate" style="font-size: x-large" title="ë§ˆì´í˜ì´ì§€">ğŸ‘¤</a>
      <a href="/user/logout" class="login">ë¡œê·¸ì•„ì›ƒ</a>
    </div>
  </div>
</nav>

<div class="content">
  <div class="container myPage">
    <div class="info_wrap">
      <div class="img_wrap">
        <div class="img_box"></div>
      </div>
      <div class="info_box_container">
        <div class="info_box">
          <div><span>ì´ë¦„</span></div>
          <div>
            <span id="nameDisplay"></span>
          </div>
        </div>
        <div class="info_box">
          <div><span>ë‹‰ë„¤ì„</span></div>
          <div>
            <span id="nicknameDisplay"></span>
          </div>
        </div>
        <div class="info_box">
          <div><span>ì´ë©”ì¼</span></div>
          <div>
            <span id="emailDisplay"></span>
          </div>
        </div>
      </div>
    </div>
    <div class="form_wrap">
      <form method="post" action="/user/myPage" id="signupForm">
        <div class="form_box">
          <label class="label_bold" for="input_nickname">ë‹‰ë„¤ì„ ë³€ê²½ / CHG_NICKNAME</label>
          <div class="input_box">
            <input type="text" class="send_code input_info" id="input_nickname" name="nickname" placeholder="ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”.">
            <button type="button" class="side_btn" id="nick_check" onclick="checkDuplicate('input_nickname')">ì¤‘ë³µí™•ì¸</button>
          </div>
          <p id="input_nicknameMessage"></p> <!-- ë‹‰ë„¤ì„ ì¤‘ë³µ í™•ì¸ ê²°ê³¼ í‘œì‹œ -->
        </div>
        <div class="form_box">
          <label class="label_bold" for="input_pwd">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ / CHG_PASSWORD</label>
          <div class="input_box">
            <input type="password" class="input_info" id="input_pwd" name="pwd" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.">
          </div>
        </div>
        <div class="form_box">
          <label class="label_bold" for="chk_pwd">ë¹„ë°€ë²ˆí˜¸ í™•ì¸ / PASSWORD CHECK</label>
          <div class="input_box">
            <input type="password" class="input_info" id="chk_pwd" name="chk_pwd" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.">
          </div>
        </div>
        <div class="form_box">
          <label class="label_bold" for="input_email">ì´ë©”ì¼ / E-MAIL</label>
          <div class="input_box">
            <input type="email" class="send_code input_info" id="input_email" name="email" placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”.">
            <button type="button" id="send_code" class="side_btn" onclick="getEmailExists('input_email')">ì½”ë“œì „ì†¡</button>
          </div>
        </div>
        <div class="form_box">
          <label class="label_bold" for="email_confirm">ì¸ì¦ì½”ë“œ ì…ë ¥</label>
          <div class="input_box">
            <input type="text" class="confirm_code input_info" id="email_confirm" name="email_confirm" placeholder="ì¸ì¦ì½”ë“œ ì…ë ¥.">
            <button type="button" id="check_code" class="side_btn" onclick="approveCode()">ì¸ì¦í™•ì¸</button>
          </div>
        </div>
        <div class="button_login_wrap">
          <button type="submit" class="btn_signup" id="goToMain">íšŒì›ì •ë³´ì €ì¥</button>
        </div>
      </form>
    </div>
  </div>
</div>

<footer></footer>
</body>
</html>

