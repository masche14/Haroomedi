

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •</title>
    <link href='//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css' rel='stylesheet' type='text/css'>
    <link href='//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-jp.css' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/css/userStyles.css">
    <link rel="stylesheet" href="/css/navStyles.css">
    <script src="/js/setReferrer.js" defer></script>
    <script type="text/javascript" src="/js/jquery-3.6.0.min.js"></script> <!-- JS ê²½ë¡œ ìˆ˜ì • -->
    <script type="text/javascript" src="/js/jquery.serializeObject.min.js"></script>
    <script src="/js/nav.js" defer></script>
    <script th:inline="javascript">
        let userId = /*[[${userId}]]*/ null;
        let existYN = /*[[${existYN}]]*/ null;
        let SS_USER_ID = /*[[${session.SS_USER_ID}]]*/ null;

        $(document).ready(function () {

            console.log("userId : ",userId);

            const segments = document.referrer.split("/");
            const referrer = segments[segments.length - 1];
            console.log("ì´ì „ í˜ì´ì§€ì˜ ë§ˆì§€ë§‰ ê²½ë¡œ:", referrer);

            if (existYN === "N") {
                alert("í•´ë‹¹ ì´ë©”ì¼ë¡œ ê°€ì…ëœ ê³„ì •ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
                window.location.href="signup_detail"
            }

            // ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì €ì¥ëœ ì•„ì´ë””ë¥¼ ê°€ì ¸ì˜¤ê¸°
            if ((referrer==="find_id"||referrer==="find_id?") && userId!=null){
                document.getElementById('input_id').value = userId;
            }

            $("#goToReset").on("click", function (){

                const input_id = $("#input_id").val();

                if (userId != input_id){
                    alert("í•´ë‹¹ ì´ë©”ì¼ë¡œ ê°€ì…ëœ ì´ì´ë””ê°€ ì•„ë‹™ë‹ˆë‹¤.");
                    return;
                }

                const pwd = $("#input_pwd").val();
                const pwd2 = $("#chk_pwd").val();

                if (pwd != pwd2) {
                    alert("ë¹„ë°€ë²ˆí˜¸ì™€ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì´ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
                    return;
                }

                $.ajax({
                    url: "/user/reset_pwd",
                    type: "post", // ì „ì†¡ë°©ì‹ì€ Post
                    contentType: "application/json",
                    dataType: "JSON", // ì „ì†¡ ê²°ê³¼ëŠ” JSONìœ¼ë¡œ ë°›ê¸°
                    data: JSON.stringify($("#resetPwdForm").serializeObject()), // form íƒœê·¸ ë‚´ input ë“± ê°ì²´ë¥¼ ìë™ìœ¼ë¡œ ì „ì†¡í•  í˜•íƒœë¡œ ë³€ê²½í•˜ê¸°
                }).then(
                    function (json) {
                        alert(json.data.msg);
                        if (json.data.result == 1) {
                            window.location = "/user/signin";
                        }
                    }
                )
            })
        });
    </script>
</head>
<body>
<header></header>

<!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
<nav>
    <div class="nav-content">
        <div class="nav-group same_width justify-left">
            <a href="/user/index">í•˜ë£¨ì•½ì†</a>
        </div>
        <div class="nav-group" id="serviceNav">
            <a href="#">ì²˜ë°© ë‚´ì—­ ì¡°íšŒ</a>
            <a href="/health/auth">ì²˜ë°© ë‚´ì—­ ë™ê¸°í™”</a>
            <a href="#">AI ì±—ë´‡ ìƒë‹´</a>
            <a href="#">ì£¼ë³€ ì•½êµ­ ì°¾ê¸°</a>
        </div>
        <div class="nav-group same_width justify-right" id="beforeLoginNav">
            <a href="#" class="login" onclick="setReferrer()">ë¡œê·¸ì¸</a>
        </div>
        <div class="nav-group after_login same_width justify-right" id="afterLoginNav">
            <a href="/user/pwd_verification" class="nav-icon" title="ë§ˆì´í˜ì´ì§€">ğŸ‘¤</a>
            <a href="/user/logout" class="login">ë¡œê·¸ì•„ì›ƒ</a>
        </div>
    </div>
</nav>

<div class="content">
    <div class="container">
        <form method="post" action="/user/reset_pwd" id="resetPwdForm">
            <div class="form_box">
                <label class="label_bold" for="input_id">ì•„ì´ë”” / ID</label>
                <div class="input_box">
                    <input type="text" class="input_info" id="input_id" name="orgId" placeholder="ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”." required>
                </div>
            </div>
            <div class="form_box">
                <label class="label_bold" for="input_pwd">ë¹„ë°€ë²ˆí˜¸ / PASSWORD</label>
                <div class="input_box">
                    <input type="password" class="input_info" id="input_pwd" name="password" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”." required>
                </div>
            </div>
            <div class="form_box">
                <label class="label_bold" for="chk_pwd">ë¹„ë°€ë²ˆí˜¸ í™•ì¸ / PASSWORD CHECK</label>
                <div class="input_box">
                    <input type="password" class="input_info" id="chk_pwd" name="pwd2" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ì„¸ìš”." required>
                </div>
            </div>
            <div class="button_login_wrap">
                <button type="button" class="btn_reset_pwd" id="goToReset">ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •</button>
            </div>
        </form>
    </div>
</div>

<footer></footer>
</body>
</html>
